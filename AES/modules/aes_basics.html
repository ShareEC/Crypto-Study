<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AES ê¸°ì´ˆ ê°œë…: ë‹¨ìœ„ì™€ ëª¨ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap');
        
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #0f172a; color: #e2e8f0; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Unit Box Styles */
        .unit-box { transition: all 0.2s ease; cursor: pointer; }
        .unit-box:hover { transform: translateY(-2px); }
        
        /* Selected Byte Style */
        .unit-box.selected {
            border-color: #3b82f6 !important; /* Blue-500 */
            background-color: rgba(59, 130, 246, 0.2) !important;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
            transform: scale(1.05);
        }

        /* Bit Styles (Larger for detail view) */
        .bit-cell {
            width: 32px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; border: 1px solid #334155;
            color: #94a3b8; background-color: #1e293b;
            border-radius: 4px; font-weight: bold;
        }
        .bit-on { 
            background-color: #3b82f6; 
            color: white; 
            border-color: #60a5fa; 
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        /* Hierarchy Connector Line */
        .tree-line { width: 2px; background-color: #475569; margin: 0 auto; }
        
        /* Mode Card Highlight */
        .mode-card.active { border-color: #3b82f6; background-color: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="p-6 min-h-screen flex flex-col items-center">

    <div class="fixed top-4 left-4 z-50">
        <a href="rcon.html" class="flex items-center gap-2 bg-slate-800/80 hover:bg-slate-700 text-slate-300 px-4 py-2 rounded-full border border-slate-600 transition shadow-lg backdrop-blur-sm text-sm font-bold no-underline">
            <span>ğŸ </span>
        </a>
    </div>

    <header class="text-center mb-10 max-w-4xl">
        <h1 class="text-4xl font-bold text-white mb-3">AES ê¸°ì´ˆ ê°œë…: <span class="text-blue-400">ë‹¨ìœ„</span>ì™€ <span class="text-green-400">ê·œê²©</span></h1>
        <p class="text-slate-400">ì•”í˜¸í•™ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë‹¨ìœ„(Bit, Byte, Word, Hex)ì˜ ê´€ê³„ì™€ AES ì¢…ë¥˜ë³„ ì°¨ì´ì ì„ ëª…í™•íˆ ì •ë¦¬í•©ë‹ˆë‹¤.</p>
    </header>

    <section class="w-full max-w-5xl bg-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl mb-12">
        <div class="flex items-center gap-3 mb-6 border-b border-slate-700 pb-4">
            <span class="text-2xl">ğŸ§¬</span>
            <h2 class="text-2xl font-bold text-white">1. ë‹¨ìœ„ í•´ë¶€í•™ (Unit Anatomy)</h2>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 flex flex-col justify-start space-y-6">
                <div class="bg-slate-900 p-5 rounded-xl border border-slate-600">
                    <label class="block text-sm text-slate-400 mb-2 font-bold">1 Word (4 Bytes) ì…ë ¥ (Hex)</label>
                    <input type="text" id="hexInput" value="2B7E1516" maxlength="8" 
                           class="mono w-full bg-slate-800 text-white text-2xl text-center p-3 rounded border border-blue-500 focus:outline-none uppercase tracking-widest"
                           oninput="handleInput()">
                    <p class="text-xs text-slate-500 mt-2 text-center">Hex 8ìë¦¬ = 32 Bits = 1 Word</p>
                </div>
                
                <div class="text-sm text-slate-300 space-y-2 bg-slate-700/30 p-4 rounded-lg">
                    <p>ğŸ‘‰ <span class="text-yellow-400 font-bold">1 Hex</span> ë¬¸ì = <span class="font-bold">4 Bits</span></p>
                    <p>ğŸ‘‰ <span class="text-pink-400 font-bold">2 Hex</span> ë¬¸ì = <span class="font-bold">1 Byte</span> (8 Bits)</p>
                    <p>ğŸ‘‰ <span class="text-blue-400 font-bold">8 Hex</span> ë¬¸ì = <span class="font-bold">1 Word</span> (32 Bits)</p>
                </div>
            </div>

            <div class="lg:col-span-8 flex flex-col items-center">
                
                <div class="bg-blue-900/40 border-2 border-blue-500 p-4 rounded-xl text-center w-full max-w-2xl relative mb-4">
                    <div class="absolute -top-3 left-4 bg-slate-800 px-2 text-xs text-blue-400 font-bold">1 Word (32-bit)</div>
                    <div class="mono text-3xl font-bold text-white tracking-[1em]" id="dispWord">2B7E1516</div>
                </div>

                <div class="h-6 tree-line mb-2"></div>

                <p class="text-xs text-slate-400 mb-2">ğŸ‘‡ ì•„ë˜ ë°”ì´íŠ¸ë¥¼ í´ë¦­í•˜ì—¬ ë¹„íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
                <div class="grid grid-cols-4 gap-4 w-full max-w-2xl mb-6">
                    <div class="unit-box bg-pink-900/30 border border-pink-500/50 p-3 rounded-lg text-center" id="byteBox0" onclick="selectByte(0)">
                        <div class="text-[10px] text-pink-400 mb-1">Byte 0</div>
                        <div class="mono text-xl font-bold text-white" id="dispByte0">2B</div>
                    </div>
                    <div class="unit-box bg-pink-900/30 border border-pink-500/50 p-3 rounded-lg text-center" id="byteBox1" onclick="selectByte(1)">
                        <div class="text-[10px] text-pink-400 mb-1">Byte 1</div>
                        <div class="mono text-xl font-bold text-white" id="dispByte1">7E</div>
                    </div>
                    <div class="unit-box bg-pink-900/30 border border-pink-500/50 p-3 rounded-lg text-center" id="byteBox2" onclick="selectByte(2)">
                        <div class="text-[10px] text-pink-400 mb-1">Byte 2</div>
                        <div class="mono text-xl font-bold text-white" id="dispByte2">15</div>
                    </div>
                    <div class="unit-box bg-pink-900/30 border border-pink-500/50 p-3 rounded-lg text-center" id="byteBox3" onclick="selectByte(3)">
                        <div class="text-[10px] text-pink-400 mb-1">Byte 3</div>
                        <div class="mono text-xl font-bold text-white" id="dispByte3">16</div>
                    </div>
                </div>

                <div class="h-6 tree-line mb-2"></div>

                <div class="w-full max-w-2xl bg-slate-900 p-6 rounded-xl border border-slate-600 flex flex-col items-center transition-all">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-sm font-bold text-slate-400">Selected:</span>
                        <span class="px-2 py-1 bg-pink-500/20 text-pink-300 rounded text-xs font-bold mono">Byte <span id="selectedByteNum">0</span></span>
                        <span class="px-2 py-1 bg-slate-700 text-white rounded text-xs font-bold mono">0x<span id="selectedByteHex">2B</span></span>
                    </div>
                    
                    <div class="flex gap-2" id="bitDetailContainer">
                        </div>
                    
                    <div class="mt-3 text-[10px] text-slate-500 mono">â–² Binary Representation (8 Bits)</div>
                </div>

            </div>
        </div>
    </section>

    <section class="w-full max-w-5xl bg-slate-800 rounded-2xl p-8 border border-slate-700 shadow-2xl">
        <div class="flex items-center gap-3 mb-6 border-b border-slate-700 pb-4">
            <span class="text-2xl">âš–ï¸</span>
            <h2 class="text-2xl font-bold text-white">2. AES ëª¨ë“œë³„ ë¹„êµ (128 vs 192 vs 256)</h2>
        </div>

        <div class="flex justify-center gap-4 mb-8">
            <button onclick="setMode(128)" id="btn128" class="mode-card active px-6 py-3 bg-slate-700 border border-slate-600 rounded-xl hover:bg-slate-600 transition flex flex-col items-center min-w-[120px]">
                <span class="text-lg font-bold text-white">AES-128</span>
                <span class="text-xs text-slate-400">Standard</span>
            </button>
            <button onclick="setMode(192)" id="btn192" class="mode-card px-6 py-3 bg-slate-700 border border-slate-600 rounded-xl hover:bg-slate-600 transition flex flex-col items-center min-w-[120px]">
                <span class="text-lg font-bold text-white">AES-192</span>
                <span class="text-xs text-slate-400">High Sec</span>
            </button>
            <button onclick="setMode(256)" id="btn256" class="mode-card px-6 py-3 bg-slate-700 border border-slate-600 rounded-xl hover:bg-slate-600 transition flex flex-col items-center min-w-[120px]">
                <span class="text-lg font-bold text-white">AES-256</span>
                <span class="text-xs text-slate-400">Top Secret</span>
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            <div class="bg-slate-900 p-6 rounded-xl border border-slate-600">
                <h3 class="text-lg font-bold text-blue-400 mb-4 flex justify-between">
                    <span>ğŸ—ï¸ ë¹„ë°€í‚¤ ê¸¸ì´ (Variable)</span>
                    <span id="keyLenText" class="mono bg-blue-900/50 px-2 rounded text-white">128 bit</span>
                </h3>
                
                <div class="relative h-20 bg-slate-800 rounded-lg overflow-hidden border border-slate-700 flex items-center px-4 transition-all">
                    <div id="keyBar" class="h-12 bg-gradient-to-r from-blue-600 to-cyan-400 rounded shadow-lg flex items-center justify-center text-white font-bold text-sm transition-all duration-500" style="width: 50%;">
                        <span id="keyWordsText">4 Words</span>
                    </div>
                </div>
                
                <div class="mt-4 space-y-2 text-sm text-slate-400">
                    <div class="flex justify-between border-b border-slate-700 py-1">
                        <span>Hex Length</span>
                        <span id="keyHexLen" class="font-bold text-white">32 chars</span>
                    </div>
                    <div class="flex justify-between border-b border-slate-700 py-1">
                        <span>Bytes</span>
                        <span id="keyByteLen" class="font-bold text-white">16 Bytes</span>
                    </div>
                    <div class="flex justify-between py-1">
                        <span>Nk (Words)</span>
                        <span id="keyNkLen" class="font-bold text-yellow-400">4</span>
                    </div>
                </div>
            </div>

            <div class="bg-slate-900 p-6 rounded-xl border border-green-900/50">
                <h3 class="text-lg font-bold text-green-400 mb-4 flex justify-between">
                    <span>ğŸ“¦ ë¸”ë¡ í¬ê¸° (Fixed)</span>
                    <span class="mono bg-green-900/50 px-2 rounded text-white">128 bit</span>
                </h3>
                
                <div class="relative h-20 bg-slate-800 rounded-lg overflow-hidden border border-slate-700 flex items-center px-4">
                    <div class="h-12 bg-green-600 rounded shadow-lg flex items-center justify-center text-white font-bold text-sm w-1/2 mx-auto opacity-80 border-2 border-green-400 border-dashed">
                        <span>Always 4 Words</span>
                    </div>
                </div>
                
                <div class="mt-4 p-3 bg-green-900/20 border border-green-500/30 rounded text-xs text-green-200 leading-relaxed text-center">
                    âš ï¸ <b>ì£¼ì˜:</b> í‚¤ ê¸¸ì´ê°€ 192, 256ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ë„<br>
                    ì‹¤ì œ ì•”í˜¸í™”ë˜ëŠ” ë°ì´í„° ì¡°ê°(ë¸”ë¡)ê³¼<br>
                    ë¼ìš´ë“œ í‚¤ì˜ í¬ê¸°ëŠ” <b>ë¬´ì¡°ê±´ 128bit(4ì›Œë“œ)</b>ë¡œ ê³ ì •ì…ë‹ˆë‹¤.
                </div>
            </div>

        </div>

        <div class="mt-8 bg-slate-900 p-6 rounded-xl border border-purple-500/30">
            <h3 class="text-lg font-bold text-purple-400 mb-4">ğŸ”„ ë¼ìš´ë“œì™€ ì´ í‚¤ í™•ì¥ëŸ‰</h3>
            
            <div class="flex flex-col md:flex-row items-center justify-around gap-6">
                
                <div class="text-center">
                    <div class="text-sm text-slate-400 mb-1">Rounds ($N_r$)</div>
                    <div id="valNr" class="text-4xl font-bold text-white">10</div>
                </div>

                <div class="text-2xl text-slate-600">Ã—</div>

                <div class="text-center">
                    <div class="text-sm text-slate-400 mb-1">Block Words</div>
                    <div class="text-4xl font-bold text-green-400">4</div>
                    <div class="text-[10px] text-slate-500">(Fixed)</div>
                </div>

                <div class="text-2xl text-slate-600">+</div>

                <div class="text-center">
                    <div class="text-sm text-slate-400 mb-1">Initial Key</div>
                    <div class="text-4xl font-bold text-blue-400">4</div>
                    <div class="text-[10px] text-slate-500">(Words)</div>
                </div>

                <div class="text-2xl text-slate-600">=</div>

                <div class="bg-purple-900/40 border border-purple-500 p-4 rounded-xl text-center min-w-[150px]">
                    <div class="text-xs text-purple-300 mb-1">Total Words Needed</div>
                    <div id="valTotalWords" class="text-3xl font-bold text-white mono">44</div>
                </div>

            </div>
            <p class="text-center text-slate-500 text-xs mt-4">
                ê³µì‹: <span class="mono">4 Ã— (Nr + 1)</span>
            </p>
        </div>

    </section>

    <script>
        // --- Globals ---
        let currentFullHex = "2B7E1516";
        let selectedByteIdx = 0; // 0, 1, 2, 3

        // --- Helper: Hex to Bin ---
        function hexToBin(hexChar) {
            const num = parseInt(hexChar, 16);
            if (isNaN(num)) return "0000";
            return num.toString(2).padStart(4, '0');
        }

        // --- Core Logic ---
        function handleInput() {
            let val = document.getElementById('hexInput').value.toUpperCase().replace(/[^0-9A-F]/g, '');
            if(val.length > 8) val = val.substring(0,8);
            
            // Pad with 0 if incomplete for visualization
            const paddedVal = val.padEnd(8, '0');
            currentFullHex = paddedVal;
            
            // Update Main Word Display
            document.getElementById('dispWord').innerText = paddedVal;

            // Split into bytes for display
            const bytes = [
                paddedVal.substring(0, 2),
                paddedVal.substring(2, 4),
                paddedVal.substring(4, 6),
                paddedVal.substring(6, 8)
            ];

            // Update Byte Boxes Text
            document.getElementById('dispByte0').innerText = bytes[0];
            document.getElementById('dispByte1').innerText = bytes[1];
            document.getElementById('dispByte2').innerText = bytes[2];
            document.getElementById('dispByte3').innerText = bytes[3];

            // Refresh Detail View
            updateDetailView();
        }

        function selectByte(idx) {
            selectedByteIdx = idx;
            
            // Update Selection UI
            for(let i=0; i<4; i++) {
                const box = document.getElementById(`byteBox${i}`);
                if(i === idx) box.classList.add('selected');
                else box.classList.remove('selected');
            }

            updateDetailView();
        }

        function updateDetailView() {
            // Get Current Byte Hex
            const start = selectedByteIdx * 2;
            const byteHex = currentFullHex.substring(start, start + 2);
            
            // Update Labels
            document.getElementById('selectedByteNum').innerText = selectedByteIdx;
            document.getElementById('selectedByteHex').innerText = byteHex;

            // Generate Bits
            const h1 = byteHex[0] || '0';
            const h2 = byteHex[1] || '0';
            const bits = hexToBin(h1) + hexToBin(h2); // 8 bits

            // Render Bits
            let html = '';
            for(let bit of bits) {
                const isOn = bit === '1';
                html += `<div class="bit-cell ${isOn ? 'bit-on' : ''}">${bit}</div>`;
            }
            document.getElementById('bitDetailContainer').innerHTML = html;
        }

        // --- AES Mode Logic (Part 2) ---
        const MODES = {
            128: { nk: 4, nr: 10, barWidth: '50%' }, 
            192: { nk: 6, nr: 12, barWidth: '75%' }, 
            256: { nk: 8, nr: 14, barWidth: '100%' } 
        };

        function setMode(mode) {
            const data = MODES[mode];
            
            // 1. Button Highlight
            document.querySelectorAll('.mode-card').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn${mode}`).classList.add('active');

            // 2. Key Length Visuals
            const keyBar = document.getElementById('keyBar');
            keyBar.style.width = data.barWidth;
            keyBar.innerText = `${data.nk} Words`;
            
            if(mode === 128) keyBar.className = "h-12 bg-gradient-to-r from-blue-600 to-cyan-400 rounded shadow-lg flex items-center justify-center text-white font-bold text-sm transition-all duration-500";
            if(mode === 192) keyBar.className = "h-12 bg-gradient-to-r from-indigo-600 to-purple-400 rounded shadow-lg flex items-center justify-center text-white font-bold text-sm transition-all duration-500";
            if(mode === 256) keyBar.className = "h-12 bg-gradient-to-r from-purple-700 to-pink-500 rounded shadow-lg flex items-center justify-center text-white font-bold text-sm transition-all duration-500";

            // 3. Text Updates
            document.getElementById('keyLenText').innerText = `${mode} bit`;
            document.getElementById('keyHexLen').innerText = `${data.nk * 8} chars`;
            document.getElementById('keyByteLen').innerText = `${data.nk * 4} Bytes`;
            document.getElementById('keyNkLen').innerText = data.nk;

            // 4. Round Calculation Update
            document.getElementById('valNr').innerText = data.nr;
            const totalWords = 4 * (data.nr + 1);
            document.getElementById('valTotalWords').innerText = totalWords;
        }

        // Initialize
        window.onload = function() {
            handleInput(); // Initial parse
            selectByte(0); // Select first byte by default
            setMode(128);  // Default Mode
        };
    </script>
</body>
</html>