<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECIES Encryption - í•˜ì´ë¸Œë¦¬ë“œ ì•”í˜¸í™”</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/ecc.css">

    <style>
        /* Base Styles */
        body { background-color: #0f172a; color: #e2e8f0; font-family: 'sans-serif'; }
        .page-section { border-bottom: 1px dashed #334155; padding-bottom: 4rem; margin-bottom: 4rem; }
        .page-section:last-child { border-bottom: none; }
        
        /* Section 0: Prerequisite (Data Size) */
        .size-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem; }
        .size-card { background: #1e293b; border: 1px solid #475569; border-radius: 12px; padding: 1.5rem; position: relative; overflow: hidden; }
        .size-badge { font-size: 0.75rem; font-weight: bold; text-transform: uppercase; padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 0.5rem; }
        
        .badge-small { background: rgba(245, 158, 11, 0.2); color: #fbbf24; border: 1px solid rgba(245, 158, 11, 0.4); }
        .badge-large { background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.4); }
        
        .size-visual { height: 60px; display: flex; align-items: center; margin: 1rem 0; gap: 4px; }
        .bit-block { height: 40px; background: #475569; border-radius: 4px; }
        
        /* Section 1: Concept Comparison */
        .compare-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
        .compare-card { background: #0f172a; border: 1px solid #334155; border-radius: 12px; padding: 1.5rem; }
        .compare-title { font-size: 1.1rem; font-weight: bold; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem; }
        
        .tech-detail { font-size: 0.85rem; color: #94a3b8; background: #1e293b; padding: 10px; border-radius: 6px; margin-top: 10px; border-left: 3px solid; }
        .detail-ecc { border-color: #f59e0b; }
        .detail-aes { border-color: #10b981; }

        /* Simulator UI */
        .flow-container { display: flex; flex-direction: column; gap: 1rem; background: #0f172a; padding: 1.5rem; border-radius: 12px; border: 1px solid #334155; }
        
        .flow-row { display: grid; grid-template-columns: 80px 1fr 50px; align-items: center; gap: 1rem; padding: 1rem; background: #1e293b; border-radius: 8px; border: 1px solid #475569; opacity: 0.4; transition: all 0.4s ease; transform: scale(0.99); }
        .flow-row.active { opacity: 1; border-color: #3b82f6; box-shadow: 0 0 20px rgba(59, 130, 246, 0.2); transform: scale(1); }
        .flow-row.done { opacity: 0.6; border-color: #22c55e; transform: scale(1); }
        
        .actor { font-weight: bold; font-size: 0.9rem; text-align: center; }
        .actor-alice { color: #60a5fa; }
        .actor-bob { color: #4ade80; }
        .actor-net { color: #facc15; }
        
        .step-badge { font-size: 0.7rem; font-weight: bold; padding: 2px 8px; border-radius: 4px; background: #334155; color: #cbd5e1; margin-bottom: 6px; display: inline-block; }
        .step-detail { font-family: 'Roboto Mono', monospace; font-size: 0.8rem; color: #94a3b8; }
        .status-icon { font-size: 1.5rem; text-align: center; }
        
        .input-area { background: #1e293b; padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; border: 1px solid #475569; display: flex; gap: 1rem; align-items: center; }
        .msg-input { background: #0f172a; border: 1px solid #475569; color: white; padding: 0.8rem; border-radius: 6px; flex-grow: 1; font-family: 'Roboto Mono', monospace; outline: none; }
        .msg-input:focus { border-color: #3b82f6; }
        
        .btn-send { background: #2563eb; color: white; padding: 0 24px; height: 46px; border-radius: 6px; font-weight: bold; transition: background 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .btn-send:hover { background: #1d4ed8; }
    </style>
</head>
<body class="custom-scrollbar bg-slate-900 text-slate-200">

    <a href="index.html" class="home-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
        </svg>
        Back to Dashboard
    </a>

    <div class="max-w-4xl mx-auto pt-20 pb-12 px-6">
        
        <header class="text-center mb-16 page-section border-b border-slate-800 pb-12">
            <span class="text-teal-400 font-bold tracking-wider text-sm uppercase">Hybrid Encryption Protocol</span>
            <h1 class="text-3xl md:text-5xl font-black text-slate-100 mt-2 mb-6">
                ECIES (Integrated Encryption Scheme)<br>
                <span class="text-slate-500 text-2xl md:text-3xl">ECCë¡œ í‚¤ë¥¼ ë§ºê³ , AESë¡œ ë°ì´í„°ë¥¼ ì ê·¼ë‹¤</span>
            </h1>
            <p class="text-slate-400 text-sm mt-4">
                "ì•ˆì „í•˜ì§€ë§Œ ëŠë¦° ECC"ì™€ "ë¹ ë¥´ê³  ê°•ë ¥í•œ AES"ë¥¼ ê²°í•©í•œ í˜„ëŒ€ ì•”í˜¸ í†µì‹ ì˜ í‘œì¤€ì…ë‹ˆë‹¤.
            </p>
        </header>

        <section class="page-section">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                <span class="text-yellow-500">0.</span> ì‚¬ì „ ì§€ì‹: ë°ì´í„° í¬ê¸°ë³„ ì „ëµ
            </h2>
            <p class="text-slate-400 text-sm mb-6">
                ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì€ <strong>ë°ì´í„°ì˜ ìš©ëŸ‰</strong>ì— ë”°ë¼ ì—­í• ì´ ì² ì €íˆ ë‚˜ë‰©ë‹ˆë‹¤.
            </p>
            
            <div class="size-grid">
                <div class="size-card">
                    <span class="size-badge badge-small">Small Data (Key, Hash)</span>
                    <h3 class="font-bold text-lg text-white">ë¹„ëŒ€ì¹­í‚¤ (ECC, RSA)</h3>
                    <div class="size-visual">
                        <div class="bit-block bg-yellow-500 w-8 animate-pulse"></div>
                    </div>
                    <p class="text-xs text-slate-400">
                        <strong>256-bit ë‚´ì™¸ì˜ ì•„ì£¼ ì‘ì€ ë°ì´í„°</strong>(ë¹„ë°€í‚¤, ì„œëª…) ì²˜ë¦¬ì— íŠ¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê¸´ ë°ì´í„°ë¥¼ ë„£ìœ¼ë©´ ì²˜ë¦¬ê°€ ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ë§¤ìš° ëŠë¦½ë‹ˆë‹¤.
                    </p>
                </div>

                <div class="size-card">
                    <span class="size-badge badge-large">Large Data (File, Video)</span>
                    <h3 class="font-bold text-lg text-white">ëŒ€ì¹­í‚¤ (AES, ChaCha20)</h3>
                    <div class="size-visual">
                        <div class="bit-block bg-blue-500 w-full"></div>
                    </div>
                    <p class="text-xs text-slate-400">
                        <strong>ê¸°ê°€ë°”ì´íŠ¸(GB) ë‹¨ìœ„ì˜ ëŒ€ìš©ëŸ‰ ë°ì´í„°</strong>ë„ ìˆœì‹ê°„ì— ì²˜ë¦¬í•©ë‹ˆë‹¤. ë„·í”Œë¦­ìŠ¤ ì˜ìƒì´ë‚˜ íŒŒì¼ ì „ì†¡ì€ ëª¨ë‘ ì´ê²ƒì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </section>

        <section class="page-section">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                <span class="text-blue-500">1.</span> ì™œ ì†ë„ ì°¨ì´ê°€ ë‚ ê¹Œìš”?
            </h2>
            
            <div class="compare-grid">
                <div class="compare-card">
                    <div class="compare-title text-yellow-400">
                        <span>ğŸ¢ ECC: ê³ ë¹„ìš© ìˆ˜í•™ ì—°ì‚°</span>
                    </div>
                    <p class="text-sm text-slate-300">
                        ECCëŠ” ë‹¨ìˆœ ê³„ì‚°ì´ ì•„ë‹™ë‹ˆë‹¤. ê³¡ì„  ìœ„ì—ì„œ <strong>"ì  ë§ì…ˆ(Point Addition)"</strong>ê³¼ <strong>"ë‘ ë°° ì—°ì‚°(Doubling)"</strong>ì„ ìˆ˜ì²œ ë²ˆ ë°˜ë³µí•˜ëŠ” ê±°ëŒ€í•œ ìˆ˜í•™ ë¬¸ì œì…ë‹ˆë‹¤.
                    </p>
                    <div class="tech-detail detail-ecc">
                        <strong>Logic:</strong> \( Q = G + G + \dots + G \) (d times)<br>
                        í° ìˆ˜ì˜ ë‚˜ëˆ—ì…ˆ(Modulo)ì´ ê³„ì† ë°œìƒí•˜ì—¬ CPU ë¶€í•˜ê°€ í½ë‹ˆë‹¤.
                    </div>
                </div>

                <div class="compare-card">
                    <div class="compare-title text-green-400">
                        <span>ğŸ‡ AES: ë‹¨ìˆœ ë¹„íŠ¸ ë’¤ì„ê¸°</span>
                    </div>
                    <p class="text-sm text-slate-300">
                        AESëŠ” ìˆ˜í•™ë³´ë‹¤ëŠ” <strong>"ê¸°ê³„ì  ì¹˜í™˜"</strong>ì— ê°€ê¹ìŠµë‹ˆë‹¤. ë¹„íŠ¸(0,1)ë¥¼ ë°€ê³ (Shift), ì„ê³ (Mix), ë°”ê¾¸ëŠ”(Sub) ë‹¨ìˆœ ì‘ì—…ì˜ ë°˜ë³µì…ë‹ˆë‹¤.
                    </p>
                    <div class="tech-detail detail-aes">
                        <strong>Logic:</strong> XOR, Bit-Shift, Substitution<br>
                        í˜„ëŒ€ CPUëŠ” ì´ë¥¼ ìœ„í•œ ì „ìš© ëª…ë ¹ì–´(AES-NI)ê°€ ìˆì–´ ë¹›ì˜ ì†ë„ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </section>

        <section class="page-section border-none">
            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                <span class="text-green-500">2.</span> ECIES ì „ì†¡ ê³¼ì • ì‹¤ìŠµ
            </h2>
            
            <div class="input-area">
                <input type="text" id="msg-input" class="msg-input" value="Hello, ECC World!" placeholder="ë³´ë‚¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
                <button onclick="runEcies()" id="btn-send" class="btn-send">
                    <span>ğŸš€ ì•”í˜¸í™” ì „ì†¡ (Send)</span>
                </button>
            </div>

            <div class="flow-container">
                
                <div class="flow-row" id="step-1">
                    <div class="actor actor-alice">Alice</div>
                    <div class="action-box">
                        <span class="step-badge bg-blue-900 text-blue-200">1. Key Gen</span>
                        <div class="font-bold text-sm text-white mb-1">ì¼íšŒìš© í‚¤(Ephemeral Key) ìƒì„±</div>
                        <div class="step-detail">Random \(r\), Public \(R = r \times G\)</div>
                    </div>
                    <div class="status-icon">ğŸ²</div>
                </div>

                <div class="flow-row" id="step-2">
                    <div class="actor actor-alice">Alice</div>
                    <div class="action-box">
                        <span class="step-badge bg-yellow-900 text-yellow-200">2. ECDH (Slow)</span>
                        <div class="font-bold text-sm text-white mb-1">ë¹„ë°€í‚¤(S) ê³„ì‚° (ìˆ˜í•™ ì—°ì‚°)</div>
                        <div class="step-detail">\(S = r \times Q_{Bob}\) <span class="text-slate-500">âœ AES Key ë„ì¶œ</span></div>
                    </div>
                    <div class="status-icon">ğŸ¢</div>
                </div>

                <div class="flow-row" id="step-3">
                    <div class="actor actor-alice">Alice</div>
                    <div class="action-box">
                        <span class="step-badge bg-green-900 text-green-200">3. AES Encrypt (Fast)</span>
                        <div class="font-bold text-sm text-white mb-1">ë°ì´í„° ì•”í˜¸í™” (ë¹„íŠ¸ ì—°ì‚°)</div>
                        <div class="step-detail text-red-400" id="cipher-text">waiting...</div>
                    </div>
                    <div class="status-icon">ğŸ‡</div>
                </div>

                <div class="flow-row" id="step-4" style="border-style: dashed;">
                    <div class="actor actor-net">Network</div>
                    <div class="action-box">
                        <span class="step-badge bg-slate-700">4. Transport</span>
                        <div class="font-bold text-sm text-white mb-1">íŒ¨í‚· ì „ì†¡ (ê³µê°œëœ ì±„ë„)</div>
                        <div class="step-detail">Packet = [ \(R\) (ê³µê°œí‚¤) || Ciphertext ]</div>
                    </div>
                    <div class="status-icon">ğŸ“¡</div>
                </div>

                <div class="flow-row" id="step-5">
                    <div class="actor actor-bob">Bob</div>
                    <div class="action-box">
                        <span class="step-badge bg-green-900 text-green-200">5. Decrypt</span>
                        <div class="font-bold text-sm text-white mb-1">ë³µí˜¸í™” (Key ë³µì› âœ AES í•´ì œ)</div>
                        <div class="step-detail">\(S = d_{Bob} \times R\) âœ AES Key</div>
                        <div class="mt-2 text-green-400 font-bold text-lg" id="final-msg">waiting...</div>
                    </div>
                    <div class="status-icon" id="bob-lock">ğŸ”’</div>
                </div>

            </div>
        </section>

    </div>

    <script>
        function runEcies() {
            const msg = document.getElementById('msg-input').value;
            if(!msg) { alert("ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; }

            const btn = document.getElementById('btn-send');
            btn.disabled = true;
            btn.innerHTML = `<span class="animate-spin">ğŸ”„</span> ì²˜ë¦¬ ì¤‘...`;

            // Reset UI
            document.querySelectorAll('.flow-row').forEach(row => {
                row.classList.remove('active', 'done');
                row.style.opacity = '0.4';
            });
            document.getElementById('cipher-text').innerText = "waiting...";
            document.getElementById('final-msg').innerText = "waiting...";
            document.getElementById('bob-lock').innerText = "ğŸ”’";

            const randomHex = () => Array.from({length: 20}, () => Math.floor(Math.random()*16).toString(16)).join('');

            // Sequence
            const steps = [
                { id: 'step-1', delay: 500 },
                { id: 'step-2', delay: 1500 },
                { id: 'step-3', delay: 2500, action: () => {
                    document.getElementById('cipher-text').innerText = "0x" + randomHex() + "...";
                }},
                { id: 'step-4', delay: 3500 },
                { id: 'step-5', delay: 4500, action: () => {
                    document.getElementById('bob-lock').innerText = "ğŸ”“";
                    document.getElementById('final-msg').innerText = `"${msg}"`;
                    
                    setTimeout(() => {
                        btn.disabled = false;
                        btn.innerHTML = `<span>ğŸš€ ì•”í˜¸í™” ì „ì†¡ (Send Again)</span>`;
                    }, 1000);
                }}
            ];

            steps.forEach((step, index) => {
                setTimeout(() => {
                    const el = document.getElementById(step.id);
                    el.classList.add('active');
                    el.style.opacity = '1';
                    
                    if(index > 0) {
                        const prev = document.getElementById(steps[index-1].id);
                        prev.classList.replace('active', 'done');
                    }
                    if(step.action) step.action();
                }, step.delay);
            });
        }
    </script>

    <footer class="custom-footer dark-footer-style">
        <div class="footer-inner">
            <p class="footer-text-mb2">Based on SEC 1: Elliptic Curve Cryptography</p>
            <p class="footer-text-mb4">&copy; 2026 ECC Master class. Generated for Educational Purpose.</p>
            <div class="signature-box">
                <span class="sig-label">Created by</span>
                <span class="sig-name">EunChang</span>
                <a href="mailto:focus81@teia.co.kr" class="email-link">
                    <svg class="email-icon w-6 h-6 text-slate-400 hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                </a>
            </div>
        </div>
    </footer>
</body>
</html>